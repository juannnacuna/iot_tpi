<!DOCTYPE html>
<html>
  <head>
    <title>ESP32 Web Server</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="data:,">
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <h1>ESP32 Web Server</h1>
    <h2>Nodo 37</h2>

    <table class="table">
      <tr>
        <td>
          <h2>Unidad 37A</h2>
          <p>Data: <span id="dataNodeA"></span>cm</p>
          <p>Estado: <strong id="stateNodeA">%STATE_NODE_A%</strong></p>
          <p>
            <a href="ocuparNodeA"><button class="button">OCUPAR</button></a>
            <a href="liberarNodeA"><button class="button button2">LIBERAR</button></a>
          </p>
        </td>
        <td>
          <h2>Unidad 37B</h2>
          <p>Data: <span id="dataNodeB"></span>cm</p>
          <p>Estado: <strong id="stateNodeB">%STATE_NODE_B%</strong></p>
          <p>
            <a href="ocuparNodeB"><button class="button">OCUPAR</button></a>
            <a href="liberarNodeB"><button class="button button2">LIBERAR</button></a>
          </p>
        </td>
      </tr>
      <tr>
        <td>
          <h2>Unidad 37C</h2>
          <p>Data: <span id="dataNodeC"></span>cm</p>
          <p>Estado: <strong id="stateNodeC">%STATE_NODE_C%</strong></p>
          <p>
            <a href="ocuparNodeC"><button class="button">OCUPAR</button></a>
            <a href="liberarNodeC"><button class="button button2">LIBERAR</button></a>
          </p>
        </td>
        <td>
          <h2>Unidad 37D</h2>
          <p>Data: <span id="dataNodeD"></span>cm</p>
          <p>Estado: <strong id="stateNodeD">%STATE_NODE_D%</strong></p>
          <p>
            <a href="ocuparNodeD"><button class="button">OCUPAR</button></a>
            <a href="liberarNodeD"><button class="button button2">LIBERAR</button></a>
          </p>
        </td>
      </tr>
    </table>

    <!-- Script para actualizar automatica los estados cada 5 segundos -->
    <script>
      setInterval(function() {
        fetch('/dataNodeA')
          .then(response => response.text())
          .then(data => {
            document.getElementById("dataNodeA").innerHTML = data;
          });
        fetch('/statusNodeA')
          .then(response => response.text())
          .then(data => {
            document.getElementById("stateNodeA").innerHTML = data;
          });
        fetch('/dataNodeB')
          .then(response => response.text())
          .then(data => {
            document.getElementById("dataNodeB").innerHTML = data;
          });
        fetch('/statusNodeB')
          .then(response => response.text())
          .then(data => {
            document.getElementById("stateNodeB").innerHTML = data;
          });
        fetch('/dataNodeC')
          .then(response => response.text())
          .then(data => {
            document.getElementById("dataNodeC").innerHTML = data;
          });
        fetch('/statusNodeC')
          .then(response => response.text())
          .then(data => {
            document.getElementById("stateNodeC").innerHTML = data;
          });
        fetch('/dataNodeD')
          .then(response => response.text())
          .then(data => {
            document.getElementById("dataNodeD").innerHTML = data;
          });
        fetch('/statusNodeD')
          .then(response => response.text())
          .then(data => {
            document.getElementById("stateNodeD").innerHTML = data;
          });
      }, 5000);
    </script>
  </body>
</html>